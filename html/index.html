<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Vehicle Expense Calculator</title>
        <link rel="stylesheet" href="../css/styles.css">
    </head>
    <body>
        <header>
            <span class="branding-text">Vehicle Expense Calculator</span>
        </header>
        
        <div class="container">
            <!-- Left Column (Input Form) -->
            <div class="left-column">
                <h3>Vehicle Details</h3>
                <!-- Profile Management Section Moved -->
                <div class="button">
                    <select id="profileSelector" onchange="loadProfile()">
                        <option value="">Select a Vehicle</option>
                    </select>
                    <button onclick="saveProfile()">Save</button>
                    <button onclick="deleteProfile()">Delete</button>
                </div>

                <label for="model">Model</label>
                <input type="text" id="model" oninput="generateReport()">

                <!-- Slider for Loan Availed -->
                <div class="slider">
                    <h3 style="margin: 0;">Loan Availed</h3>
                    <input type="range" id="loanAvailed" min="0" max="1" step="1" onchange="toggleLoanDetails(this.value)" style="flex: 1;">
                    <span id="loanAvailedLabel">No</span>
                </div>


                <!-- Loan Details Section (Initially Hidden) -->
                <div id="loanDetails" style="display: none;">
                    <h3>Loan Details</h3>
                    <label for="downPayment">Down Payment</label>
                    <input type="number" id="downPayment" step="0.01" oninput="generateReport()">

                    <label for="principal">Principal (Loan Amount)</label>
                    <input type="number" id="principal" step="0.01" oninput="generateReport()">

                    <label for="interestRate">Rate of Interest (%)</label>
                    <input type="number" id="interestRate" step="0.01" oninput="generateReport()">

                    <label for="termMonths">Term (Months)</label>
                    <input type="number" id="termMonths" oninput="generateReport()">

                    <label for="monthsPaid">Months Paid</label>
                    <input type="number" id="monthsPaid" oninput="generateReport()">

                    <label for="emiPaidInAdvance">EMI Paid in Advance</label>
                    <input type="number" id="emiPaidInAdvance" step="0.01" oninput="generateReport()">
                </div>

                <!-- Current Ownership Period Field (Initially Hidden) -->
                <div id="ownershipPeriodSection" style="display: none;">
                    <h3>Current Ownership Period</h3>
                    <label for="currentOwnershipPeriod">Ownership Period (Months)</label>
                    <input type="number" id="currentOwnershipPeriod" oninput="generateReport()">
                </div>

                <h3>Maintenance Details</h3>
                <label for="distance">Distance Ran Per Year (km)</label>
                <input type="number" id="distance" oninput="generateReport()">

                <label for="mileage">Mileage (km/l)</label>
                <input type="number" id="mileage" step="0.01" oninput="generateReport()">

                <label for="fuelCost">Fuel Cost per Litre</label>
                <input type="number" id="fuelCost" step="0.01" oninput="generateReport()">

                <label for="serviceMaintenance">Service Maintenance (per Year)</label>
                <input type="number" id="serviceMaintenance" step="0.01" oninput="generateReport()">

                <label for="otherMaintenance">Other Maintenance & Repair</label>
                <input type="number" id="otherMaintenance" step="0.01" oninput="generateReport()">

                <label for="ownershipPeriod">Ownership Period (Months) (Tentative)</label>
                <input type="number" id="ownershipPeriod" oninput="generateReport()">

                <h3>Vehicle Resale Value</h3>
                <label for="resaleValue">Resale Value</label>
                <input type="number" id="resaleValue" step="0.01" oninput="generateReport()">

                <!-- Refresh Button -->
                <div class="refresh-chart-container">
                    <button class="button" onclick="generateReport()">Refresh</button>
                </div>
            </div>

            <!-- Right Column (Report Display) -->
            <div class="right-column">
                <h2>Expense Summary Report</h2>
                <div class="report-container">
                    <!-- Expense Report Section -->
                    <div id="expenseReport" class="report-column"></div>

                    <!-- Charts -->
                    <div class="report-column">
                        <canvas id="expenseChartToDate"></canvas>
                    </div>
                    <div class="report-column">
                        <canvas id="expenseChartOwnership"></canvas>
                    </div>
                </div>

                <!-- Notes Section -->
                <div class="notes">
                    <h2>Notes</h2>
                    <textarea id="noteInput" placeholder="Type your note here..."></textarea>
                    <button onclick="addNote()">Save Note</button>
                    <div class="notes-list" id="notesList"></div>
                </div>
            </div>
        </div>

        <script src="../js/script.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
        
    </body>
</html>
